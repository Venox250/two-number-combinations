<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二合組合產生器</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        #main-content { display: none; } /* 預設隱藏主要功能 */
        .input-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; max-width: 400px; margin: auto; }
        .input-grid input { width: 60px; padding: 5px; text-align: center; }
        .result-table { margin: auto; border-collapse: collapse; width: 80%; }
        th, td { border: 1px solid black; padding: 5px; text-align: center; }
    </style>
</head>
<body>

    <!-- 安全碼輸入區 -->
    <div id="password-section">
        <h2>請輸入安全碼</h2>
        <p>請輸入 6~12 位數字</p>
        <input type="password" id="password-input" placeholder="輸入 6~12 位數字">
        <button onclick="checkPassword()" id="submit-button">進入</button>
        <p id="error-message" style="color: red;"></p>
    </div>

    <!-- 主要功能區（預設隱藏） -->
    <div id="main-content">
        <h2>二合組合產生器</h2>
        <p>請輸入 2~15 個數字</p>

        <!-- 固定 15 格輸入框 -->
        <div class="input-grid">
            <input type="text" id="num1">
            <input type="text" id="num2">
            <input type="text" id="num3">
            <input type="text" id="num4">
            <input type="text" id="num5">
            <input type="text" id="num6">
            <input type="text" id="num7">
            <input type="text" id="num8">
            <input type="text" id="num9">
            <input type="text" id="num10">
            <input type="text" id="num11">
            <input type="text" id="num12">
            <input type="text" id="num13">
            <input type="text" id="num14">
            <input type="text" id="num15">
        </div>
        <br>
        <button onclick="generateCombinations()">生成組合</button>
        <h3 id="total-combinations"></h3>

        <!-- 組合結果表格 -->
        <table class="result-table"></table>
    </div>

    <script>
        let attemptCount = 0; // 記錄錯誤次數
        const maxAttempts = 3; // 最大嘗試次數

        function checkPassword() {
            const today = new Date();
            const month = String(today.getMonth() + 1).padStart(2, '0'); // 月份補零
            const day = String(today.getDate()).padStart(2, '0'); // 日期補零
            const correctPassword = month + day; // 當前日期的 4 位數字，例如 0227

            const userInput = document.getElementById("password-input").value;
            const errorMessage = document.getElementById("error-message");
            const passwordInput = document.getElementById("password-input");
            const submitButton = document.getElementById("submit-button");

            if (userInput === correctPassword) {
                document.getElementById("password-section").style.display = "none";
                document.getElementById("main-content").style.display = "block";
            } else {
                attemptCount++;
                if (attemptCount >= maxAttempts) {
                    errorMessage.textContent = "已達最大嘗試次數，請稍後再試！";
                    passwordInput.disabled = true;
                    submitButton.disabled = true;
                } else {
                    errorMessage.textContent = `安全碼錯誤，剩餘嘗試次數：${maxAttempts - attemptCount}`;
                }
            }
        }

        function generateCombinations() {
            let numbers = [];
            for (let i = 1; i <= 15; i++) {
                let value = document.getElementById("num" + i).value.trim();
                if (value !== "" && !isNaN(value)) {
                    numbers.push(parseInt(value));
                }
            }

            if (numbers.length < 2) {
                alert("請至少輸入 2 個數字！");
                return;
            }

            let combinations = [];
            for (let i = 0; i < numbers.length; i++) {
                for (let j = i + 1; j < numbers.length; j++) {
                    combinations.push(numbers[i] + "," + numbers[j]);
                }
            }

            document.getElementById("total-combinations").textContent = "總組合數：" + combinations.length;

            let table = document.querySelector(".result-table");
            table.innerHTML = "";

            let headers = document.createElement("tr");
            let columns = Math.ceil(combinations.length / 10);
            for (let i = 0; i < columns; i++) {
                let th = document.createElement("th");
                th.textContent = `組合 ${i * 10 + 1}~${(i + 1) * 10}`;
                headers.appendChild(th);
            }
            table.appendChild(headers);

            let maxRows = Math.ceil(combinations.length / columns);
            for (let row = 0; row < maxRows; row++) {
                let tr = document.createElement("tr");
                for (let col = 0; col < columns; col++) {
                    let index = col * maxRows + row;
                    let td = document.createElement("td");
                    if (index < combinations.length) {
                        td.textContent = combinations[index];
                    }
                    tr.appendChild(td);
                }
                table.appendChild(tr);
            }
        }
    </script>

</body>
</html>
