<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二合組合產生器</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        #main-content { display: none; } /* 預設隱藏主要功能 */
    </style>
</head>
<body>

    <!-- 安全碼輸入區 -->
    <div id="password-section">
        <h2>請輸入安全碼</h2>
        <p>請輸入 6~12 位數字</p>
        <input type="password" id="password-input" placeholder="輸入 6~12 位數字">
        <button onclick="checkPassword()" id="submit-button">進入</button>
        <p id="error-message" style="color: red;"></p>
    </div>

    <!-- 主要功能區（預設隱藏） -->
    <div id="main-content">
        <h2>二合組合產生器</h2>
        <p>輸入數字後，系統將自動生成所有二合組合。</p>
        <input type="text" id="numbers" placeholder="輸入 2~15 個數字 (以逗號分隔)">
        <button onclick="generateCombinations()">開始計算</button>
        <h3 id="total-combinations"></h3>
        <table id="results-table"></table>
    </div>

    <script>
        let attemptCount = 0; // 記錄錯誤次數
        const maxAttempts = 3; // 最大嘗試次數

        function checkPassword() {
            const userInput = document.getElementById("password-input").value;
            const errorMessage = document.getElementById("error-message");
            const passwordInput = document.getElementById("password-input");
            const submitButton = document.getElementById("submit-button");

            // 設定的安全碼（可自行更改）
            const correctPassword = "123456"; 

            // 驗證是否為 6~12 位數字
            const passwordPattern = /^[0-9]{6,12}$/;

            if (!passwordPattern.test(userInput)) {
                errorMessage.textContent = "安全碼格式錯誤！請輸入 6~12 位數字。";
                return;
            }

            if (userInput === correctPassword) {
                document.getElementById("password-section").style.display = "none";
                document.getElementById("main-content").style.display = "block";
            } else {
                attemptCount++;
                if (attemptCount >= maxAttempts) {
                    errorMessage.textContent = "已達最大嘗試次數，請稍後再試！";
                    passwordInput.disabled = true;  // 禁用輸入框
                    submitButton.disabled = true;  // 禁用按鈕
                } else {
                    errorMessage.textContent = `安全碼錯誤，剩餘嘗試次數：${maxAttempts - attemptCount}`;
                }
            }
        }

        function generateCombinations() {
            var input = document.getElementById("numbers").value;
            var numbers = input.split(',').map(num => parseInt(num.trim())).filter(num => !isNaN(num));

            if (numbers.length < 2 || numbers.length > 15) {
                alert("請輸入 2~15 個有效數字！");
                return;
            }

            var combinations = [];
            for (var i = 0; i < numbers.length; i++) {
                for (var j = i + 1; j < numbers.length; j++) {
                    combinations.push(numbers[i] + "," + numbers[j]);
                }
            }

            document.getElementById("total-combinations").textContent = "總組合數：" + combinations.length;

            var table = document.getElementById("results-table");
            table.innerHTML = "<tr><th>組合</th></tr>";

            combinations.forEach(pair => {
                var row = table.insertRow();
                var cell = row.insertCell(0);
                cell.textContent = pair;
            });
        }
    </script>

</body>
</html>
